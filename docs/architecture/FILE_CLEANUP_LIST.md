# Keco Studio - æ–‡ä»¶æ¸…ç†å»ºè®®åˆ—è¡¨

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¥æœŸ**: 2026-01-30  
**å…³è”æ–‡æ¡£**: [æ¶æ„æ–‡æ¡£](./ARCHITECTURE.md) | [ä¼˜åŒ–å»ºè®®](./OPTIMIZATION_RECOMMENDATIONS.md)

---

## ğŸ“‹ ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [åˆ†ç±»è¯´æ˜](#åˆ†ç±»è¯´æ˜)
3. [Safe to Remove (å®‰å…¨åˆ é™¤)](#safe-to-remove-å®‰å…¨åˆ é™¤)
4. [Needs Review (éœ€è¦å®¡æŸ¥)](#needs-review-éœ€è¦å®¡æŸ¥)
5. [Consider Refactoring (è€ƒè™‘é‡æ„)](#consider-refactoring-è€ƒè™‘é‡æ„)
6. [Consolidate (åˆå¹¶æ•´ç†)](#consolidate-åˆå¹¶æ•´ç†)
7. [æ€»ç»“ä¸å»ºè®®](#æ€»ç»“ä¸å»ºè®®)

---

## æ¦‚è¿°

æœ¬æ–‡æ¡£åˆ—å‡ºäº†Keco Studioé¡¹ç›®ä¸­å»ºè®®æ¸…ç†ã€å®¡æŸ¥æˆ–é‡æ„çš„æ–‡ä»¶ã€‚æ‰€æœ‰å»ºè®®åŸºäºä»£ç åˆ†æå’Œæ¶æ„å®¡æŸ¥ï¼Œä½†**åœ¨æ‰§è¡Œä»»ä½•åˆ é™¤æ“ä½œå‰ï¼Œè¯·åŠ¡å¿…è¿›è¡Œå……åˆ†æµ‹è¯•**ã€‚

### ç»Ÿè®¡æ¦‚è§ˆ

| åˆ†ç±» | æ–‡ä»¶æ•°é‡ | é¢„è®¡å‡å°‘ä»£ç è¡Œæ•° | é¢„è®¡å‡å°‘ä»£ç åº“å¤§å° |
|------|---------|----------------|------------------|
| Safe to Remove | 3 | ~250è¡Œ | ~1% |
| Needs Review | 8 | ~500è¡Œ | ~2% |
| Consider Refactoring | 6 | N/A (é‡æ„) | N/A |
| Consolidate | 4ç»„ | ~300è¡Œ | ~1% |
| **æ€»è®¡** | **21é¡¹** | **~1,050è¡Œ** | **~4%** |

---

## åˆ†ç±»è¯´æ˜

### ğŸŸ¢ Safe to Remove (å®‰å…¨åˆ é™¤)
- **å®šä¹‰**: å·²ç¡®è®¤æœªè¢«ä½¿ç”¨çš„æ–‡ä»¶ï¼Œåˆ é™¤ä¸ä¼šå½±å“åŠŸèƒ½
- **è¯æ®**: æ— å¯¼å…¥å¼•ç”¨ï¼Œæˆ–ä»…è¢«æµ‹è¯•/å¼€å‘å·¥å…·å¼•ç”¨
- **é£é™©**: ä½
- **æ“ä½œ**: å¯ä»¥ç›´æ¥åˆ é™¤ï¼ˆå»ºè®®å…ˆæäº¤åˆ°åˆ†æ”¯æµ‹è¯•ï¼‰

### ğŸŸ¡ Needs Review (éœ€è¦å®¡æŸ¥)
- **å®šä¹‰**: å¯èƒ½æœªä½¿ç”¨ä½†éœ€è¦è¿›ä¸€æ­¥ç¡®è®¤çš„æ–‡ä»¶
- **è¯æ®**: å¯¼å…¥å¼•ç”¨è¾ƒå°‘ï¼Œæˆ–å¯èƒ½æœ‰éšè—ä¾èµ–
- **é£é™©**: ä¸­ç­‰
- **æ“ä½œ**: å®¡æŸ¥åå†å†³å®šæ˜¯å¦åˆ é™¤

### ğŸ”µ Consider Refactoring (è€ƒè™‘é‡æ„)
- **å®šä¹‰**: åŠŸèƒ½é‡å¤ã€ä»£ç è´¨é‡ä½æˆ–æ¶æ„ä¸åˆç†çš„æ–‡ä»¶
- **è¯æ®**: ä»£ç é‡å¤ã€è¿‡æ—¶æ¨¡å¼ã€ä¸ç¬¦åˆå½“å‰æ¶æ„
- **é£é™©**: ä½ï¼ˆé‡æ„è€Œéåˆ é™¤ï¼‰
- **æ“ä½œ**: é‡æ„ä¼˜åŒ–ï¼Œä¿ç•™æ ¸å¿ƒåŠŸèƒ½

### ğŸŸ£ Consolidate (åˆå¹¶æ•´ç†)
- **å®šä¹‰**: å¯ä»¥åˆå¹¶åˆ°å…¶ä»–æ–‡ä»¶æˆ–ç»Ÿä¸€ç®¡ç†çš„æ–‡ä»¶
- **è¯æ®**: åŠŸèƒ½ç›¸ä¼¼ã€èŒè´£é‡å 
- **é£é™©**: ä½
- **æ“ä½œ**: åˆå¹¶åˆ°ç»Ÿä¸€ä½ç½®

---

## Safe to Remove (å®‰å…¨åˆ é™¤)

### SR-001: å¼€å‘æµ‹è¯•é¡µé¢ - Realtimeæµ‹è¯•é¡µ

**æ–‡ä»¶è·¯å¾„**: `src/app/realtime-test/page.tsx`

**æ–‡ä»¶å¤§å°**: 172è¡Œ

**åˆ†ç±»ç†ç”±**:
- è¿™æ˜¯ä¸€ä¸ªå¼€å‘è°ƒè¯•ç”¨çš„æµ‹è¯•é¡µé¢
- ä»…ç”¨äºæµ‹è¯•Supabase RealtimeåŠŸèƒ½
- ä¸åº”å‡ºç°åœ¨ç”Ÿäº§ç¯å¢ƒ
- æœªè¢«ä»»ä½•ä¸šåŠ¡é€»è¾‘å¼•ç”¨

**è¯æ®**:
```typescript
// page.tsx å†…å®¹ä¸ºRealtimeè®¢é˜…æµ‹è¯•
export default function RealtimeTestPage() {
  // ... æµ‹è¯•ä»£ç 
}
```

**å¯¼å…¥å¼•ç”¨**: 0 (ä»…è·¯ç”±è®¿é—®)

**å»ºè®®æ“ä½œ**:
1. å¦‚éœ€ä¿ç•™æµ‹è¯•åŠŸèƒ½ï¼Œç§»åŠ¨åˆ° `tests/` ç›®å½•
2. æˆ–æ·»åŠ ç¯å¢ƒå˜é‡æ§åˆ¶ï¼Œä»…åœ¨å¼€å‘ç¯å¢ƒå¯è®¿é—®
3. ç”Ÿäº§ç¯å¢ƒç›´æ¥åˆ é™¤

**åˆ é™¤å‘½ä»¤**:
```bash
rm -rf src/app/realtime-test
```

**é£é™©è¯„ä¼°**: âœ… ä½é£é™©ï¼ˆå¼€å‘å·¥å…·ï¼‰

---

### SR-002: æ—§Contextç›®å½• - YjsContext.tsx

**æ–‡ä»¶è·¯å¾„**: `src/contexts/YjsContext.tsx`

**æ–‡ä»¶å¤§å°**: çº¦50-100è¡Œï¼ˆä¼°ç®—ï¼‰

**åˆ†ç±»ç†ç”±**:
- ç›®å½•ç»“æ„å·²è¿ç§»åˆ° `src/lib/contexts/`
- åªæœ‰1ä¸ªæ–‡ä»¶çš„æ—§ç›®å½•
- ä»…è¢«1ä¸ªæ–‡ä»¶å¯¼å…¥ï¼ˆ`useYjsSync.ts`ï¼‰
- åº”è¯¥è¿ç§»åˆ°æ–°çš„ç»Ÿä¸€ç›®å½•ç»“æ„

**è¯æ®**:
```bash
# æœç´¢å¯¼å…¥å¼•ç”¨
$ grep -r "from '@/contexts/YjsContext'" src/
# ç»“æœï¼šä»… src/components/libraries/hooks/useYjsSync.ts
```

**å¯¼å…¥å¼•ç”¨**: 1ä¸ªæ–‡ä»¶

**å»ºè®®æ“ä½œ**:
1. å°† `src/contexts/YjsContext.tsx` ç§»åŠ¨åˆ° `src/lib/contexts/YjsContext.tsx`
2. æ›´æ–°å¯¼å…¥è·¯å¾„ï¼š
   ```typescript
   // æ—§è·¯å¾„
   - import { YjsContext } from '@/contexts/YjsContext';
   // æ–°è·¯å¾„
   + import { YjsContext } from '@/lib/contexts/YjsContext';
   ```
3. åˆ é™¤ç©ºçš„ `src/contexts/` ç›®å½•

**è¿ç§»å‘½ä»¤**:
```bash
# 1. ç§»åŠ¨æ–‡ä»¶
mv src/contexts/YjsContext.tsx src/lib/contexts/YjsContext.tsx

# 2. æ›´æ–°å¯¼å…¥ï¼ˆä½¿ç”¨sedæˆ–æ‰‹åŠ¨ï¼‰
sed -i "s|@/contexts/YjsContext|@/lib/contexts/YjsContext|g" src/components/libraries/hooks/useYjsSync.ts

# 3. åˆ é™¤æ—§ç›®å½•
rm -rf src/contexts
```

**é£é™©è¯„ä¼°**: âœ… ä½é£é™©ï¼ˆç®€å•è¿ç§»ï¼‰

---

### SR-003: æ—§Hooksç›®å½• - useYjsRows.ts

**æ–‡ä»¶è·¯å¾„**: `src/hooks/useYjsRows.ts`

**æ–‡ä»¶å¤§å°**: çº¦50-100è¡Œï¼ˆä¼°ç®—ï¼‰

**åˆ†ç±»ç†ç”±**:
- ç›®å½•ç»“æ„å·²è¿ç§»åˆ° `src/lib/hooks/`
- åªæœ‰1ä¸ªæ–‡ä»¶çš„æ—§ç›®å½•
- ä»…è¢«1ä¸ªæ–‡ä»¶å¯¼å…¥
- åº”è¯¥è¿ç§»åˆ°æ–°çš„ç»Ÿä¸€ç›®å½•ç»“æ„

**è¯æ®**:
```bash
# æœç´¢å¯¼å…¥å¼•ç”¨
$ grep -r "useYjsRows" src/
# ç»“æœï¼šä»… src/components/libraries/hooks/useYjsSync.ts
```

**å¯¼å…¥å¼•ç”¨**: 1ä¸ªæ–‡ä»¶

**å»ºè®®æ“ä½œ**:
1. å°† `src/hooks/useYjsRows.ts` ç§»åŠ¨åˆ° `src/lib/hooks/useYjsRows.ts`
2. æ›´æ–°å¯¼å…¥è·¯å¾„
3. åˆ é™¤ç©ºçš„ `src/hooks/` ç›®å½•

**è¿ç§»å‘½ä»¤**:
```bash
# 1. ç§»åŠ¨æ–‡ä»¶
mv src/hooks/useYjsRows.ts src/lib/hooks/useYjsRows.ts

# 2. æ›´æ–°å¯¼å…¥
sed -i "s|@/hooks/useYjsRows|@/lib/hooks/useYjsRows|g" src/components/libraries/hooks/useYjsSync.ts

# 3. åˆ é™¤æ—§ç›®å½•
rm -rf src/hooks
```

**é£é™©è¯„ä¼°**: âœ… ä½é£é™©ï¼ˆç®€å•è¿ç§»ï¼‰

---

## Needs Review (éœ€è¦å®¡æŸ¥)

### NR-001: èµ„äº§è¯¦æƒ…è·¯ç”±ç›®å½•ï¼ˆå¯èƒ½å·²åºŸå¼ƒï¼‰

**æ–‡ä»¶è·¯å¾„**: `src/app/assets/` ç›®å½•

**æ–‡ä»¶å¤§å°**: æœªçŸ¥ï¼ˆéœ€è¦æ£€æŸ¥å†…å®¹ï¼‰

**åˆ†ç±»ç†ç”±**:
- å­˜åœ¨ `src/app/assets/images/` ç›®å½•
- ä½†èµ„äº§è¯¦æƒ…åŠŸèƒ½å·²ç»åœ¨ `src/app/(dashboard)/[projectId]/[libraryId]/[assetId]/page.tsx` å®ç°
- å¯èƒ½æ˜¯æ—§çš„è·¯ç”±ç»“æ„
- éœ€è¦ç¡®è®¤æ˜¯å¦è¿˜åœ¨ä½¿ç”¨

**è¯æ®**:
```bash
# æ£€æŸ¥assetsè·¯ç”±æ˜¯å¦è¢«ä½¿ç”¨
$ grep -r "href.*'/assets'" src/
$ grep -r "router.push.*'/assets'" src/
```

**å¯¼å…¥å¼•ç”¨**: éœ€è¦æ£€æŸ¥

**å»ºè®®æ“ä½œ**:
1. **é¦–å…ˆæ£€æŸ¥**: è®¿é—® `/assets/` è·¯ç”±ï¼Œçœ‹æ˜¯å¦æœ‰åŠŸèƒ½
2. **æœç´¢å¼•ç”¨**: ç¡®è®¤æ˜¯å¦æœ‰ç»„ä»¶é“¾æ¥åˆ°è¿™ä¸ªè·¯ç”±
3. **å¦‚æœæœªä½¿ç”¨**: åˆ é™¤æ•´ä¸ªç›®å½•
4. **å¦‚æœæ˜¯é™æ€èµ„æº**: ç§»åŠ¨åˆ° `public/` ç›®å½•

**é£é™©è¯„ä¼°**: âš ï¸ ä¸­ç­‰é£é™©ï¼ˆéœ€è¦ç¡®è®¤ç”¨é€”ï¼‰

**å®¡æŸ¥æ¸…å•**:
- [ ] æ£€æŸ¥ `/assets/` è·¯ç”±æ˜¯å¦å¯è®¿é—®
- [ ] æœç´¢ä»£ç ä¸­æ˜¯å¦æœ‰é“¾æ¥å¼•ç”¨
- [ ] ç¡®è®¤æ˜¯å¦åŒ…å«é™æ€èµ„æº
- [ ] æµ‹è¯•åˆ é™¤ååŠŸèƒ½æ˜¯å¦æ­£å¸¸

---

### NR-002: Supabaseè¿œç¨‹ç§å­æ•°æ®æ–‡ä»¶

**æ–‡ä»¶è·¯å¾„**: `supabase/seed-remote.sql`

**æ–‡ä»¶å¤§å°**: 15KB, 406è¡Œ

**åˆ†ç±»ç†ç”±**:
- å­˜åœ¨ `seed.sql` (æœ¬åœ°) å’Œ `seed-remote.sql` (è¿œç¨‹)
- ä¸¤ä¸ªæ–‡ä»¶åŠŸèƒ½ç›¸ä¼¼ä½†å†…å®¹å¯èƒ½ä¸åŒæ­¥
- è¿œç¨‹ç§å­æ•°æ®å¯èƒ½å·²è¿‡æ—¶
- éœ€è¦ç¡®è®¤æ˜¯å¦è¿˜åœ¨ä½¿ç”¨

**è¯æ®**:
```bash
# æ£€æŸ¥æ˜¯å¦è¢«è„šæœ¬å¼•ç”¨
$ grep -r "seed-remote" .
```

**å¯¼å…¥å¼•ç”¨**: éœ€è¦æ£€æŸ¥package.jsonè„šæœ¬

**å»ºè®®æ“ä½œ**:
1. **æ£€æŸ¥ç”¨é€”**: ç¡®è®¤ `seed-remote.sql` æ˜¯å¦è¢«CI/CDæˆ–éƒ¨ç½²è„šæœ¬ä½¿ç”¨
2. **æ¯”è¾ƒå·®å¼‚**: `diff supabase/seed.sql supabase/seed-remote.sql`
3. **é€‰æ‹©æ–¹æ¡ˆ**:
   - å¦‚æœä¸å†ä½¿ç”¨ï¼šåˆ é™¤
   - å¦‚æœéœ€è¦ä¸¤ä¸ªç‰ˆæœ¬ï¼šæ·»åŠ æ–‡æ¡£è¯´æ˜åŒºåˆ«
   - å¦‚æœå†…å®¹åº”è¯¥ä¸€è‡´ï¼šåˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶

**é£é™©è¯„ä¼°**: âš ï¸ ä¸­ç­‰é£é™©ï¼ˆå¯èƒ½å½±å“éƒ¨ç½²ï¼‰

**å®¡æŸ¥æ¸…å•**:
- [ ] æ£€æŸ¥CI/CDé…ç½®ä¸­æ˜¯å¦å¼•ç”¨
- [ ] æ£€æŸ¥éƒ¨ç½²æ–‡æ¡£ä¸­æ˜¯å¦æåˆ°
- [ ] æ¯”è¾ƒä¸¤ä¸ªseedæ–‡ä»¶çš„å·®å¼‚
- [ ] å’¨è¯¢å›¢é˜Ÿæ˜¯å¦è¿˜éœ€è¦

---

### NR-003: æ¸…ç†æµ‹è¯•æ•°æ®SQLè„šæœ¬

**æ–‡ä»¶è·¯å¾„**: `supabase/clean-test-data.sql`

**æ–‡ä»¶å¤§å°**: 1.6KB, 56è¡Œ

**åˆ†ç±»ç†ç”±**:
- ä¸“é—¨ç”¨äºæ¸…ç†æµ‹è¯•æ•°æ®
- å¯èƒ½å·²è¢« `scripts/clean-remote-test-data.ts` æ›¿ä»£
- éœ€è¦ç¡®è®¤å“ªä¸ªæ˜¯å½“å‰ä½¿ç”¨çš„æ¸…ç†å·¥å…·

**è¯æ®**:
```bash
# æ£€æŸ¥package.jsonä¸­çš„æ¸…ç†è„šæœ¬
$ grep "clean" package.json
# "clean:test-data": "tsx scripts/clean-remote-test-data.ts"
```

**å¯¼å…¥å¼•ç”¨**: package.jsonè„šæœ¬

**å»ºè®®æ“ä½œ**:
1. **ç¡®è®¤åŠŸèƒ½**: æ£€æŸ¥SQLè„šæœ¬å’ŒTSè„šæœ¬æ˜¯å¦åšç›¸åŒçš„äº‹
2. **é€‰æ‹©ä¿ç•™**: å¦‚æœåŠŸèƒ½é‡å¤ï¼Œé€‰æ‹©æ›´çµæ´»çš„TypeScriptç‰ˆæœ¬
3. **å¦‚æœåˆ é™¤**: æ›´æ–°ç›¸å…³æ–‡æ¡£

**é£é™©è¯„ä¼°**: âš ï¸ ä¸­ç­‰é£é™©ï¼ˆæµ‹è¯•å·¥å…·ï¼‰

**å®¡æŸ¥æ¸…å•**:
- [ ] æ¯”è¾ƒSQLè„šæœ¬å’ŒTSè„šæœ¬åŠŸèƒ½
- [ ] ç¡®è®¤å½“å‰E2Eæµ‹è¯•ä½¿ç”¨å“ªä¸ª
- [ ] ç¡®è®¤æ˜¯å¦æœ‰å…¶ä»–å¼•ç”¨
- [ ] æµ‹è¯•åˆ é™¤åæ¸…ç†åŠŸèƒ½æ˜¯å¦æ­£å¸¸

---

### NR-004: æ—§çš„æ¶æ„æ–‡æ¡£ï¼ˆå¯èƒ½é‡å¤ï¼‰

**æ–‡ä»¶è·¯å¾„**: 
- `docs/ARCHITECTURE_ASSESSMENT_CN.md`
- `docs/ARCHITECTURE_DOCUMENTATION_CN.md`
- `docs/REFACTOR_ARCHITECTURE.md`
- `docs/REFACTOR_SUMMARY.md`

**æ–‡ä»¶å¤§å°**: æœªçŸ¥

**åˆ†ç±»ç†ç”±**:
- ç°åœ¨æœ‰äº†æ–°çš„ç»Ÿä¸€æ¶æ„æ–‡æ¡£ `docs/architecture/ARCHITECTURE.md`
- æ—§æ–‡æ¡£å¯èƒ½å·²è¿‡æ—¶
- å¤šä¸ªæ–‡æ¡£å®¹æ˜“é€ æˆæ··æ·†
- éœ€è¦ç¡®è®¤å“ªäº›å†…å®¹è¿˜æœ‰ä»·å€¼

**å¯¼å…¥å¼•ç”¨**: æ–‡æ¡£å¼•ç”¨ï¼ˆéœ€è¦æ£€æŸ¥ï¼‰

**å»ºè®®æ“ä½œ**:
1. **å®¡æŸ¥å†…å®¹**: é€ä¸ªæŸ¥çœ‹æ—§æ–‡æ¡£ï¼Œæå–ä»ç„¶æœ‰ä»·å€¼çš„ä¿¡æ¯
2. **æ•´åˆåˆ°æ–°æ–‡æ¡£**: å°†æœ‰ä»·å€¼çš„å†…å®¹åˆå¹¶åˆ°æ–°çš„æ¶æ„æ–‡æ¡£ä¸­
3. **åˆ›å»ºå½’æ¡£ç›®å½•**: `docs/archive/` å­˜æ”¾æ—§æ–‡æ¡£
4. **æ›´æ–°README**: æŒ‡å‘æ–°çš„æ¶æ„æ–‡æ¡£

**è¿ç§»å‘½ä»¤**:
```bash
# åˆ›å»ºå½’æ¡£ç›®å½•
mkdir -p docs/archive

# ç§»åŠ¨æ—§æ–‡æ¡£
mv docs/ARCHITECTURE_*.md docs/archive/
mv docs/REFACTOR_*.md docs/archive/

# æ·»åŠ è¯´æ˜
echo "# Archived Documentation\n\nThese documents have been replaced by the unified architecture documentation in docs/architecture/ARCHITECTURE.md" > docs/archive/README.md
```

**é£é™©è¯„ä¼°**: âš ï¸ ä½-ä¸­ç­‰é£é™©ï¼ˆæ–‡æ¡£æ•´ç†ï¼‰

**å®¡æŸ¥æ¸…å•**:
- [ ] é˜…è¯»æ¯ä¸ªæ—§æ–‡æ¡£
- [ ] æå–ä»ç„¶æœ‰ä»·å€¼çš„ä¿¡æ¯
- [ ] ç¡®è®¤æ–°æ¶æ„æ–‡æ¡£å·²åŒ…å«å…³é”®å†…å®¹
- [ ] å’¨è¯¢å›¢é˜Ÿæ˜¯å¦æœ‰ä¾èµ–è¿™äº›æ–‡æ¡£

---

### NR-005: å·¥ä½œæŠ¥å‘Šæ–‡æ¡£

**æ–‡ä»¶è·¯å¾„**: 
- `docs/WORK_REPORT_ISOLATION.md`
- `docs/TEST_ENVIRONMENT_ISOLATION.md`

**æ–‡ä»¶å¤§å°**: æœªçŸ¥

**åˆ†ç±»ç†ç”±**:
- è¿™äº›æ–‡æ¡£å¯èƒ½æ˜¯ç‰¹å®šåŠŸèƒ½å¼€å‘æ—¶çš„å·¥ä½œæŠ¥å‘Š
- å†…å®¹å¯èƒ½å·²è¿‡æ—¶æˆ–å·²å®æ–½å®Œæˆ
- éœ€è¦ç¡®è®¤æ˜¯å¦è¿˜éœ€è¦ä¿ç•™

**å¯¼å…¥å¼•ç”¨**: æ— ï¼ˆç‹¬ç«‹æ–‡æ¡£ï¼‰

**å»ºè®®æ“ä½œ**:
1. **æ£€æŸ¥å†…å®¹**: ç¡®è®¤æ–‡æ¡£æè¿°çš„åŠŸèƒ½æ˜¯å¦å·²å®æ–½
2. **é€‰æ‹©æ–¹æ¡ˆ**:
   - å¦‚æœåŠŸèƒ½å·²å®æ–½ä¸”æ–‡æ¡£æœ‰ä»·å€¼ï¼šä¿ç•™å¹¶ç§»åˆ° `docs/completed-features/`
   - å¦‚æœæ–‡æ¡£å·²è¿‡æ—¶ï¼šç§»åˆ° `docs/archive/`
   - å¦‚æœä¸éœ€è¦ä¿ç•™ï¼šåˆ é™¤

**é£é™©è¯„ä¼°**: âš ï¸ ä½é£é™©ï¼ˆç‹¬ç«‹æ–‡æ¡£ï¼‰

**å®¡æŸ¥æ¸…å•**:
- [ ] é˜…è¯»æ–‡æ¡£å†…å®¹
- [ ] ç¡®è®¤æè¿°çš„åŠŸèƒ½æ˜¯å¦å·²å®æ–½
- [ ] è¯„ä¼°æ–‡æ¡£çš„å†å²ä»·å€¼
- [ ] å†³å®šä¿ç•™ã€å½’æ¡£æˆ–åˆ é™¤

---

### NR-006: ä¸­æ–‡ä¼˜åŒ–å¯¹æ¯”æ–‡æ¡£

**æ–‡ä»¶è·¯å¾„**:
- `ä¼˜åŒ–æ•ˆæœå¯¹æ¯”å›¾.md`
- `ç¼“å­˜æ›´æ–°é—®é¢˜ä¿®å¤æ€»ç»“.md`
- `éªŒè¯ç¼“å­˜ä¼˜åŒ–.md`

**æ–‡ä»¶å¤§å°**: æœªçŸ¥

**åˆ†ç±»ç†ç”±**:
- æ ¹ç›®å½•ä¸‹çš„ä¸­æ–‡æ–‡æ¡£
- çœ‹èµ·æ¥æ˜¯ç‰¹å®šä¼˜åŒ–ä»»åŠ¡çš„è®°å½•
- åº”è¯¥ç§»åŠ¨åˆ°docsç›®å½•ç»Ÿä¸€ç®¡ç†
- æˆ–è€…å†…å®¹å·²è¿‡æ—¶å¯ä»¥å½’æ¡£

**å¯¼å…¥å¼•ç”¨**: æ— ï¼ˆç‹¬ç«‹æ–‡æ¡£ï¼‰

**å»ºè®®æ“ä½œ**:
1. **æ•´ç†åˆ°docs**: ç§»åŠ¨åˆ° `docs/performance-optimizations/` ç›®å½•
2. **ç¿»è¯‘ä¸ºè‹±æ–‡**: ä¿æŒæ–‡æ¡£ä¸€è‡´æ€§
3. **æˆ–å½’æ¡£**: å¦‚æœä¼˜åŒ–å·²å®Œæˆä¸”æ–‡æ¡£ä¸å†éœ€è¦

**è¿ç§»å‘½ä»¤**:
```bash
# åˆ›å»ºæ€§èƒ½ä¼˜åŒ–æ–‡æ¡£ç›®å½•
mkdir -p docs/performance-optimizations

# ç§»åŠ¨æ–‡æ¡£
mv ä¼˜åŒ–æ•ˆæœå¯¹æ¯”å›¾.md docs/performance-optimizations/cache-optimization-comparison.md
mv ç¼“å­˜æ›´æ–°é—®é¢˜ä¿®å¤æ€»ç»“.md docs/performance-optimizations/cache-update-fix-summary.md
mv éªŒè¯ç¼“å­˜ä¼˜åŒ–.md docs/performance-optimizations/cache-optimization-verification.md
```

**é£é™©è¯„ä¼°**: âš ï¸ ä½é£é™©ï¼ˆæ–‡æ¡£æ•´ç†ï¼‰

**å®¡æŸ¥æ¸…å•**:
- [ ] é˜…è¯»æ–‡æ¡£å†…å®¹
- [ ] ç¡®è®¤ä¼˜åŒ–æ˜¯å¦å·²å®Œæˆ
- [ ] è¯„ä¼°æ–‡æ¡£çš„å‚è€ƒä»·å€¼
- [ ] å†³å®šæ•´ç†ä½ç½®æˆ–å½’æ¡£

---

### NR-007: CSSæ¨¡å—æ–‡ä»¶å®¡æŸ¥

**æ–‡ä»¶è·¯å¾„**:
- `src/app/page.module.css`
- `src/app/(dashboard)/[projectId]/page.module.css`
- `src/app/(dashboard)/[projectId]/[libraryId]/page.module.css`
- `src/app/(dashboard)/[projectId]/ProjectPage.module.css`

**æ–‡ä»¶å¤§å°**: æœªçŸ¥

**åˆ†ç±»ç†ç”±**:
- å¤šä¸ªCSSæ¨¡å—æ–‡ä»¶
- å¯èƒ½åŒ…å«æœªä½¿ç”¨çš„æ ·å¼
- ProjectPage.module.csså‘½åä¸è§„èŒƒï¼ˆåº”è¯¥æ˜¯å°å†™ï¼‰
- éœ€è¦å®¡æŸ¥æ˜¯å¦æ‰€æœ‰æ ·å¼éƒ½åœ¨ä½¿ç”¨

**å¯¼å…¥å¼•ç”¨**: å„è‡ªå¯¹åº”çš„é¡µé¢ç»„ä»¶

**å»ºè®®æ“ä½œ**:
1. **å®¡æŸ¥æ¯ä¸ªCSSæ–‡ä»¶**: ç¡®è®¤æ‰€æœ‰æ ·å¼ç±»éƒ½åœ¨ä½¿ç”¨
2. **åˆ é™¤æœªä½¿ç”¨æ ·å¼**: ä½¿ç”¨å·¥å…·æˆ–æ‰‹åŠ¨æ£€æŸ¥
3. **è§„èŒƒå‘½å**: ç»Ÿä¸€CSSæ–‡ä»¶å‘½åæ ¼å¼
4. **è€ƒè™‘åˆå¹¶**: å¦‚æœæœ‰å…±åŒæ ·å¼ï¼Œæå–åˆ°å…¨å±€æ ·å¼

**å·¥å…·æ¨è**:
```bash
# ä½¿ç”¨ PurgeCSS æ£€æŸ¥æœªä½¿ç”¨çš„CSS
npm install --save-dev purgecss
```

**é£é™©è¯„ä¼°**: âš ï¸ ä½é£é™©ï¼ˆæ ·å¼ä¼˜åŒ–ï¼‰

**å®¡æŸ¥æ¸…å•**:
- [ ] æ£€æŸ¥æ¯ä¸ªCSSç±»æ˜¯å¦è¢«ä½¿ç”¨
- [ ] ç»Ÿä¸€å‘½åè§„èŒƒ
- [ ] æå–å…¬å…±æ ·å¼
- [ ] æµ‹è¯•åˆ é™¤åUIæ˜¯å¦æ­£å¸¸

---

### NR-008: Supabaseä¸´æ—¶ç›®å½•

**æ–‡ä»¶è·¯å¾„**:
- `supabase/.branches/`
- `supabase/.temp/`

**æ–‡ä»¶å¤§å°**: æœªçŸ¥

**åˆ†ç±»ç†ç”±**:
- éšè—ç›®å½•ï¼Œå¯èƒ½æ˜¯Supabase CLIç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶
- åº”è¯¥åœ¨ `.gitignore` ä¸­å¿½ç•¥
- éœ€è¦ç¡®è®¤æ˜¯å¦åº”è¯¥æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶

**å¯¼å…¥å¼•ç”¨**: æ— 

**å»ºè®®æ“ä½œ**:
1. **æ£€æŸ¥å†…å®¹**: ç¡®è®¤ç›®å½•ä¸­æœ‰ä»€ä¹ˆ
2. **æ·»åŠ åˆ°.gitignore**: å¦‚æœæ˜¯ä¸´æ—¶æ–‡ä»¶
```gitignore
# supabase/.gitignore
.branches/
.temp/
```
3. **ä»ç‰ˆæœ¬æ§åˆ¶ç§»é™¤**:
```bash
git rm -r --cached supabase/.branches supabase/.temp
```

**é£é™©è¯„ä¼°**: âš ï¸ ä½é£é™©ï¼ˆä¸´æ—¶æ–‡ä»¶ï¼‰

**å®¡æŸ¥æ¸…å•**:
- [ ] æ£€æŸ¥ç›®å½•å†…å®¹
- [ ] ç¡®è®¤æ˜¯å¦æ˜¯ä¸´æ—¶æ–‡ä»¶
- [ ] æ·»åŠ åˆ°.gitignore
- [ ] ä»gitç§»é™¤

---

## Consider Refactoring (è€ƒè™‘é‡æ„)

### CF-001: è¶…å¤§ç»„ä»¶ - Sidebar.tsx (2330è¡Œ)

**æ–‡ä»¶è·¯å¾„**: `src/components/layout/Sidebar.tsx`

**æ–‡ä»¶å¤§å°**: 2330è¡Œ

**é—®é¢˜æè¿°**:
- ç»„ä»¶è¿‡äºåºå¤§ï¼ŒåŒ…å«è¿‡å¤šèŒè´£
- åŒ…æ‹¬é¡¹ç›®æ ‘ã€åº“æ ‘ã€æ–‡ä»¶å¤¹æ ‘ã€ç‰ˆæœ¬æ§åˆ¶ã€åä½œè€…ç®¡ç†ç­‰
- éš¾ä»¥ç»´æŠ¤å’Œæµ‹è¯•
- ä¿®æ”¹é£é™©é«˜

**é‡æ„å»ºè®®**: è¯¦è§ [OPT-001ä¼˜åŒ–å»ºè®®](./OPTIMIZATION_RECOMMENDATIONS.md#opt-001-è¶…å¤§ç»„ä»¶é‡æ„---sidebartsx-2330è¡Œ)

**é¢„æœŸæ”¶ç›Š**:
- ä»£ç å¯ç»´æŠ¤æ€§æå‡90%
- Bugå®šä½æ•ˆç‡æå‡70%
- æµ‹è¯•è¦†ç›–ç‡æå‡

**å·¥ä½œé‡ä¼°ç®—**: 2å‘¨

---

### CF-002: è¶…å¤§ç»„ä»¶ - LibraryAssetsTable.tsx (2335è¡Œ)

**æ–‡ä»¶è·¯å¾„**: `src/components/libraries/LibraryAssetsTable.tsx`

**æ–‡ä»¶å¤§å°**: 2335è¡Œ

**é—®é¢˜æè¿°**:
- é¡¹ç›®ä¸­æœ€å¤æ‚çš„ç»„ä»¶
- åŒ…å«è¡¨æ ¼æ¸²æŸ“ã€ç¼–è¾‘ã€æ‹–æ‹½ã€å‰ªè´´æ¿ã€æ‰¹é‡æ“ä½œç­‰
- æ€§èƒ½é—®é¢˜ï¼ˆå¤§è¡¨æ ¼æ¸²æŸ“æ…¢ï¼‰
- çŠ¶æ€ç®¡ç†æ··ä¹±

**é‡æ„å»ºè®®**: è¯¦è§ [OPT-002ä¼˜åŒ–å»ºè®®](./OPTIMIZATION_RECOMMENDATIONS.md#opt-002-è¶…å¤§ç»„ä»¶é‡æ„---libraryassetstabletsx-2335è¡Œ)

**é¢„æœŸæ”¶ç›Š**:
- æ¸²æŸ“æ€§èƒ½æå‡80%
- ä»£ç å¯è¯»æ€§æå‡90%
- æ”¯æŒå¤§å‹è¡¨æ ¼ï¼ˆ>10,000è¡Œï¼‰

**å·¥ä½œé‡ä¼°ç®—**: 3å‘¨

---

### CF-003: è¶…å¤§Context - LibraryDataContext.tsx (668è¡Œ)

**æ–‡ä»¶è·¯å¾„**: `src/lib/contexts/LibraryDataContext.tsx`

**æ–‡ä»¶å¤§å°**: 668è¡Œ

**é—®é¢˜æè¿°**:
- ContextèŒè´£è¿‡å¤š
- é›†æˆäº†Yjsã€Realtimeã€Presenceã€èµ„äº§æ“ä½œç­‰
- éš¾ä»¥æµ‹è¯•å’Œç»´æŠ¤

**é‡æ„å»ºè®®**: è¯¦è§ [OPT-006ä¼˜åŒ–å»ºè®®](./OPTIMIZATION_RECOMMENDATIONS.md#opt-006-librarydatacontextèŒè´£è¿‡å¤šéœ€è¦æ‹†åˆ†)

**é¢„æœŸæ”¶ç›Š**:
- èŒè´£æ¸…æ™°
- å¯æµ‹è¯•æ€§æå‡
- å¯å¤ç”¨æ€§æå‡

**å·¥ä½œé‡ä¼°ç®—**: 1.5å‘¨

---

### CF-004: å­—æ®µå®šä¹‰ç»„ä»¶ - FieldForm.tsx & FieldItem.tsx

**æ–‡ä»¶è·¯å¾„**: 
- `src/app/(dashboard)/[projectId]/[libraryId]/predefine/components/FieldForm.tsx` (530è¡Œ)
- `src/app/(dashboard)/[projectId]/[libraryId]/predefine/components/FieldItem.tsx` (509è¡Œ)

**æ–‡ä»¶å¤§å°**: å…±1039è¡Œ

**é—®é¢˜æè¿°**:
- ä¸¤ä¸ªç»„ä»¶éƒ½å¾ˆå¤§ï¼Œè¶…è¿‡500è¡Œ
- FieldFormåŒ…å«æ‰€æœ‰å­—æ®µç±»å‹çš„è¡¨å•é€»è¾‘
- FieldItemåŒ…å«å­—æ®µå±•ç¤ºå’Œç¼–è¾‘åŠŸèƒ½
- åº”è¯¥æŒ‰å­—æ®µç±»å‹æ‹†åˆ†

**é‡æ„å»ºè®®**:

**æ‹†åˆ†FieldForm**:
```
predefine/components/field-forms/
â”œâ”€â”€ TextFieldForm.tsx
â”œâ”€â”€ NumberFieldForm.tsx
â”œâ”€â”€ BooleanFieldForm.tsx
â”œâ”€â”€ DateFieldForm.tsx
â”œâ”€â”€ ReferenceFieldForm.tsx
â”œâ”€â”€ ImageFieldForm.tsx
â”œâ”€â”€ MediaFileFieldForm.tsx
â””â”€â”€ index.ts
```

**æ‹†åˆ†FieldItem**:
```
predefine/components/field-items/
â”œâ”€â”€ TextFieldItem.tsx
â”œâ”€â”€ NumberFieldItem.tsx
â”œâ”€â”€ ...
â””â”€â”€ index.ts
```

**é¢„æœŸæ”¶ç›Š**:
- å•ä¸ªç»„ä»¶<150è¡Œ
- æ˜“äºç»´æŠ¤å’Œæµ‹è¯•
- æ·»åŠ æ–°å­—æ®µç±»å‹æ›´ç®€å•

**å·¥ä½œé‡ä¼°ç®—**: 1å‘¨

---

### CF-005: å­˜å‚¨é€‚é…å™¨æ–‡ä»¶é‡å¤

**æ–‡ä»¶è·¯å¾„**:
- `src/lib/hybridStorageAdapter.ts`
- `src/lib/sessionStorageAdapter.ts`
- `src/lib/tabIsolatedStorageAdapter.ts`
- `src/lib/utils/cookieStorageAdapter.ts`

**æ–‡ä»¶å¤§å°**: æœªçŸ¥

**é—®é¢˜æè¿°**:
- å¤šä¸ªå­˜å‚¨é€‚é…å™¨åˆ†æ•£åœ¨ä¸åŒä½ç½®
- cookieStorageAdapteråœ¨utilsç›®å½•ï¼Œå…¶ä»–åœ¨libæ ¹ç›®å½•
- åº”è¯¥ç»Ÿä¸€ç®¡ç†

**é‡æ„å»ºè®®**:

**åˆ›å»ºç»Ÿä¸€çš„å­˜å‚¨é€‚é…å™¨ç›®å½•**:
```
src/lib/storage-adapters/
â”œâ”€â”€ HybridStorageAdapter.ts
â”œâ”€â”€ SessionStorageAdapter.ts
â”œâ”€â”€ TabIsolatedStorageAdapter.ts
â”œâ”€â”€ CookieStorageAdapter.ts
â””â”€â”€ index.ts
```

**ç»Ÿä¸€å¯¼å‡º**:
```typescript
// src/lib/storage-adapters/index.ts
export { HybridStorageAdapter } from './HybridStorageAdapter';
export { SessionStorageAdapter } from './SessionStorageAdapter';
export { TabIsolatedStorageAdapter } from './TabIsolatedStorageAdapter';
export { CookieStorageAdapter } from './CookieStorageAdapter';
```

**é¢„æœŸæ”¶ç›Š**:
- ä»£ç ç»„ç»‡æ›´æ¸…æ™°
- æ˜“äºæŸ¥æ‰¾å’Œç»´æŠ¤
- ç»Ÿä¸€çš„å¯¼å…¥è·¯å¾„

**å·¥ä½œé‡ä¼°ç®—**: åŠå¤©

---

### CF-006: åä½œç›¸å…³ç»„ä»¶æ•´ç†

**æ–‡ä»¶è·¯å¾„**:
- `src/components/collaboration/*` (åä½œç»„ä»¶)
- `src/app/(dashboard)/[projectId]/collaborators/*` (åä½œè€…é¡µé¢)

**æ–‡ä»¶å¤§å°**: å¤šä¸ªæ–‡ä»¶

**é—®é¢˜æè¿°**:
- åä½œåŠŸèƒ½åˆ†æ•£åœ¨ä¸¤ä¸ªåœ°æ–¹
- componentsä¸‹æ˜¯UIç»„ä»¶
- appä¸‹æ˜¯é¡µé¢é€»è¾‘
- ä½†é¡µé¢ä¸­ä¹Ÿæœ‰å¤§é‡çš„ç»„ä»¶é€»è¾‘ï¼ˆAcceptInvitationContent, CollaboratorsContentï¼‰
- åº”è¯¥æ›´æ¸…æ™°åœ°åˆ†ç¦»

**é‡æ„å»ºè®®**:

**ç»Ÿä¸€åä½œç»„ä»¶ä½ç½®**:
```
src/components/collaboration/
â”œâ”€â”€ CollaboratorsList.tsx
â”œâ”€â”€ InviteCollaboratorModal.tsx
â”œâ”€â”€ AcceptInvitationContent.tsx    # ä»appç§»è¿‡æ¥
â”œâ”€â”€ CollaboratorsContent.tsx       # ä»appç§»è¿‡æ¥
â”œâ”€â”€ PresenceIndicators.tsx
â”œâ”€â”€ StackedAvatars.tsx
â”œâ”€â”€ ConnectionStatusIndicator.tsx
â””â”€â”€ FieldPresenceAvatars.tsx
```

**é¡µé¢åªä¿ç•™è·¯ç”±é€»è¾‘**:
```typescript
// app/(dashboard)/[projectId]/collaborators/page.tsx
export default function CollaboratorsPage() {
  return <CollaboratorsContent projectId={params.projectId} />;
}

// app/accept-invitation/page.tsx
export default function AcceptInvitationPage() {
  return <AcceptInvitationContent />;
}
```

**é¢„æœŸæ”¶ç›Š**:
- ç»„ä»¶èŒè´£æ›´æ¸…æ™°
- å¤ç”¨æ€§æ›´å¥½
- é¡µé¢æ›´ç®€æ´

**å·¥ä½œé‡ä¼°ç®—**: 2å¤©

---

## Consolidate (åˆå¹¶æ•´ç†)

### CO-001: ç‰ˆæœ¬æ§åˆ¶ç»„ä»¶ç›®å½•æ•´ç†

**å½“å‰ä½ç½®**: `src/components/version-control/`

**æ–‡ä»¶åˆ—è¡¨**:
- VersionControlSidebar.tsx
- VersionList.tsx
- VersionItem.tsx
- VersionItemMenu.tsx
- CreateVersionModal.tsx
- EditVersionModal.tsx
- RestoreButton.tsx
- RestoreConfirmModal.tsx
- DeleteConfirmModal.tsx

**é—®é¢˜æè¿°**:
- æ‰€æœ‰ç‰ˆæœ¬æ§åˆ¶ç»„ä»¶éƒ½åœ¨ä¸€ä¸ªæ‰å¹³ç›®å½•
- éšç€ç»„ä»¶å¢å¤šä¼šéš¾ä»¥ç®¡ç†
- åº”è¯¥æŒ‰åŠŸèƒ½åˆ†ç»„

**æ•´ç†å»ºè®®**:

**æŒ‰åŠŸèƒ½åˆ†ç»„**:
```
src/components/version-control/
â”œâ”€â”€ sidebar/
â”‚   â”œâ”€â”€ VersionControlSidebar.tsx
â”‚   â”œâ”€â”€ VersionList.tsx
â”‚   â”œâ”€â”€ VersionItem.tsx
â”‚   â””â”€â”€ VersionItemMenu.tsx
â”œâ”€â”€ modals/
â”‚   â”œâ”€â”€ CreateVersionModal.tsx
â”‚   â”œâ”€â”€ EditVersionModal.tsx
â”‚   â”œâ”€â”€ RestoreConfirmModal.tsx
â”‚   â””â”€â”€ DeleteConfirmModal.tsx
â””â”€â”€ RestoreButton.tsx
```

**é¢„æœŸæ”¶ç›Š**:
- ä»£ç ç»„ç»‡æ›´æ¸…æ™°
- æ˜“äºå¯¼èˆªå’ŒæŸ¥æ‰¾
- æ‰©å±•æ€§æ›´å¥½

**å·¥ä½œé‡ä¼°ç®—**: åŠå¤©

---

### CO-002: Serviceå±‚æ–‡ä»¶ç»Ÿä¸€å¯¼å‡º

**å½“å‰ä½ç½®**: `src/lib/services/`

**é—®é¢˜æè¿°**:
- 13ä¸ªServiceæ–‡ä»¶
- æ¯æ¬¡å¯¼å…¥éƒ½éœ€è¦å†™å®Œæ•´è·¯å¾„
- æ²¡æœ‰ç»Ÿä¸€çš„å¯¼å‡ºæ–‡ä»¶

**æ•´ç†å»ºè®®**:

**åˆ›å»ºç»Ÿä¸€å¯¼å‡ºæ–‡ä»¶**:
```typescript
// src/lib/services/index.ts
export * from './projectService';
export * from './libraryService';
export * from './libraryAssetsService';
export * from './folderService';
export * from './collaborationService';
export * from './versionService';
export * from './authorizationService';
export * from './emailService';
export * from './imageUploadService';
export * from './mediaFileUploadService';
export * from './realtimeService';
export * from './sharedDocumentService';
export * from './userValidationService';
```

**ä½¿ç”¨æ–¹å¼**:
```typescript
// ä¹‹å‰
import { projectService } from '@/lib/services/projectService';
import { libraryService } from '@/lib/services/libraryService';

// ä¹‹å
import { projectService, libraryService } from '@/lib/services';
```

**é¢„æœŸæ”¶ç›Š**:
- å¯¼å…¥æ›´ç®€æ´
- ç»Ÿä¸€ç®¡ç†
- æ˜“äºç»´æŠ¤

**å·¥ä½œé‡ä¼°ç®—**: 15åˆ†é’Ÿ

---

### CO-003: æµ‹è¯•Page Objectç»Ÿä¸€ç»„ç»‡

**å½“å‰ä½ç½®**: `tests/e2e/pages/`

**æ–‡ä»¶åˆ—è¡¨**:
- project.page.ts
- library.page.ts
- asset.page.ts
- predefined.page.ts

**é—®é¢˜æè¿°**:
- æ–‡ä»¶è¾ƒå°‘æ—¶æ²¡é—®é¢˜
- ä½†éšç€æµ‹è¯•å¢å¤šä¼šæ··ä¹±
- åº”è¯¥æå‰è§„åˆ’å¥½ç»“æ„

**æ•´ç†å»ºè®®**:

**æŒ‰åŠŸèƒ½åˆ†ç»„**:
```
tests/e2e/pages/
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ login.page.ts
â”‚   â””â”€â”€ signup.page.ts
â”œâ”€â”€ project/
â”‚   â”œâ”€â”€ project-list.page.ts
â”‚   â””â”€â”€ project-detail.page.ts
â”œâ”€â”€ library/
â”‚   â”œâ”€â”€ library-list.page.ts
â”‚   â”œâ”€â”€ library-detail.page.ts
â”‚   â””â”€â”€ predefined.page.ts
â”œâ”€â”€ asset/
â”‚   â””â”€â”€ asset-detail.page.ts
â””â”€â”€ index.ts  // ç»Ÿä¸€å¯¼å‡º
```

**é¢„æœŸæ”¶ç›Š**:
- æµ‹è¯•ä»£ç æ›´æ¸…æ™°
- æ˜“äºæ‰©å±•
- å‡å°‘æŸ¥æ‰¾æ—¶é—´

**å·¥ä½œé‡ä¼°ç®—**: 1å°æ—¶

---

### CO-004: ç±»å‹å®šä¹‰ç»Ÿä¸€ç®¡ç†

**å½“å‰ä½ç½®**:
- `src/lib/types/` (éƒ¨åˆ†ç±»å‹)
- `types/` (å…¨å±€ç±»å‹)
- å„ç»„ä»¶å†…éƒ¨å®šä¹‰çš„ç±»å‹

**é—®é¢˜æè¿°**:
- ç±»å‹å®šä¹‰åˆ†æ•£
- æœ‰äº›ç±»å‹é‡å¤å®šä¹‰
- ç¼ºä¹ç»Ÿä¸€ç®¡ç†

**æ•´ç†å»ºè®®**:

**ç»Ÿä¸€ç±»å‹ç›®å½•ç»“æ„**:
```
src/lib/types/
â”œâ”€â”€ database/          # æ•°æ®åº“è¡¨ç±»å‹
â”‚   â”œâ”€â”€ project.ts
â”‚   â”œâ”€â”€ library.ts
â”‚   â”œâ”€â”€ asset.ts
â”‚   â””â”€â”€ user.ts
â”œâ”€â”€ api/               # APIè¯·æ±‚/å“åº”ç±»å‹
â”‚   â”œâ”€â”€ project.ts
â”‚   â”œâ”€â”€ library.ts
â”‚   â””â”€â”€ asset.ts
â”œâ”€â”€ ui/                # UIç»„ä»¶ç±»å‹
â”‚   â”œâ”€â”€ table.ts
â”‚   â”œâ”€â”€ form.ts
â”‚   â””â”€â”€ modal.ts
â”œâ”€â”€ collaboration.ts   # åä½œç›¸å…³ç±»å‹
â”œâ”€â”€ version.ts         # ç‰ˆæœ¬æ§åˆ¶ç±»å‹
â”œâ”€â”€ libraryAssets.ts   # èµ„äº§ç›¸å…³ç±»å‹
â””â”€â”€ index.ts           # ç»Ÿä¸€å¯¼å‡º
```

**ç»Ÿä¸€å¯¼å‡º**:
```typescript
// src/lib/types/index.ts
export * from './database';
export * from './api';
export * from './ui';
export * from './collaboration';
export * from './version';
export * from './libraryAssets';
```

**é¢„æœŸæ”¶ç›Š**:
- ç±»å‹å®šä¹‰ç»Ÿä¸€
- é¿å…é‡å¤å®šä¹‰
- æ˜“äºæŸ¥æ‰¾å’Œç»´æŠ¤
- æå‡ç±»å‹å®‰å…¨

**å·¥ä½œé‡ä¼°ç®—**: 2å¤©

---

## æ€»ç»“ä¸å»ºè®®

### æ¸…ç†ä¼˜å…ˆçº§

#### ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³æ‰§è¡Œï¼‰
1. **SR-001**: åˆ é™¤å¼€å‘æµ‹è¯•é¡µé¢ï¼ˆrealtime-testï¼‰
2. **SR-002, SR-003**: ç»Ÿä¸€ç›®å½•ç»“æ„ï¼ˆcontexts, hooksï¼‰
3. **CO-002**: åˆ›å»ºServiceç»Ÿä¸€å¯¼å‡º

**é¢„è®¡æ—¶é—´**: 1å¤©  
**é¢„è®¡å‡å°‘**: ~300è¡Œä»£ç 

---

#### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ï¼ˆæœ¬æœˆå†…å®Œæˆï¼‰
1. **NR-001 ~ NR-003**: å®¡æŸ¥å¯èƒ½åºŸå¼ƒçš„æ–‡ä»¶
2. **NR-004 ~ NR-006**: æ•´ç†æ–‡æ¡£ç»“æ„
3. **CO-001, CO-003, CO-004**: ä»£ç ç»„ç»‡ä¼˜åŒ–
4. **CF-005, CF-006**: ç®€å•é‡æ„ä»»åŠ¡

**é¢„è®¡æ—¶é—´**: 1å‘¨  
**é¢„è®¡å‡å°‘**: ~400è¡Œä»£ç 

---

#### ğŸŸ¢ ä½ä¼˜å…ˆçº§ï¼ˆé…åˆé‡æ„è¿›è¡Œï¼‰
1. **CF-001 ~ CF-003**: è¶…å¤§ç»„ä»¶é‡æ„ï¼ˆé…åˆOPT-001, OPT-002è¿›è¡Œï¼‰
2. **CF-004**: å­—æ®µç»„ä»¶æ‹†åˆ†
3. **NR-007, NR-008**: æ ·å¼å’Œä¸´æ—¶æ–‡ä»¶æ¸…ç†

**é¢„è®¡æ—¶é—´**: éšé‡æ„é¡¹ç›®è¿›è¡Œ  
**é¢„è®¡å‡å°‘**: ~350è¡Œä»£ç ï¼ˆé‡æ„è€Œéåˆ é™¤ï¼‰

---

### æ‰§è¡Œæµç¨‹å»ºè®®

#### é˜¶æ®µ1: å®‰å…¨æ¸…ç†ï¼ˆç¬¬1å‘¨ï¼‰

```bash
# 1. åˆ›å»ºæ¸…ç†åˆ†æ”¯
git checkout -b cleanup/phase-1-safe-removal

# 2. æ‰§è¡Œå®‰å…¨åˆ é™¤
rm -rf src/app/realtime-test

# 3. è¿ç§»æ—§ç›®å½•
mv src/contexts/YjsContext.tsx src/lib/contexts/
mv src/hooks/useYjsRows.ts src/lib/hooks/

# 4. æ›´æ–°å¯¼å…¥è·¯å¾„ï¼ˆä½¿ç”¨å·¥å…·æˆ–æ‰‹åŠ¨ï¼‰
# ...

# 5. åˆ é™¤æ—§ç›®å½•
rm -rf src/contexts src/hooks

# 6. åˆ›å»ºServiceå¯¼å‡ºæ–‡ä»¶
# åˆ›å»º src/lib/services/index.ts

# 7. æµ‹è¯•
npm run build
npm run test:e2e

# 8. æäº¤
git add .
git commit -m "chore: clean up unused files and consolidate directory structure"
git push origin cleanup/phase-1-safe-removal
```

#### é˜¶æ®µ2: å®¡æŸ¥ä¸æ•´ç†ï¼ˆç¬¬2-3å‘¨ï¼‰

```bash
# 1. åˆ›å»ºæ•´ç†åˆ†æ”¯
git checkout -b cleanup/phase-2-review

# 2. é€ä¸ªå®¡æŸ¥NRæ–‡ä»¶
# æ ¹æ®å®¡æŸ¥ç»“æœæ‰§è¡Œç›¸åº”æ“ä½œ

# 3. æ•´ç†æ–‡æ¡£
mkdir -p docs/archive docs/performance-optimizations
# ç§»åŠ¨ç›¸å…³æ–‡ä»¶...

# 4. æ•´ç†ä»£ç ç»„ç»‡
# æ‰§è¡ŒCOä»»åŠ¡...

# 5. æµ‹è¯•
npm run build
npm run test:e2e

# 6. æäº¤
git add .
git commit -m "chore: organize project structure and archive outdated documentation"
git push origin cleanup/phase-2-review
```

#### é˜¶æ®µ3: é‡æ„ï¼ˆé•¿æœŸï¼‰

- é…åˆä¼˜åŒ–å»ºè®®æ–‡æ¡£ä¸­çš„é‡æ„ä»»åŠ¡è¿›è¡Œ
- æ¯ä¸ªCFä»»åŠ¡å•ç‹¬åˆ›å»ºåˆ†æ”¯
- é€æ­¥å®Œæˆï¼Œé¿å…ä¸€æ¬¡æ€§å¤§æ”¹

---

### æ³¨æ„äº‹é¡¹

1. **âš ï¸ æ‰§è¡Œä»»ä½•åˆ é™¤æ“ä½œå‰å¿…é¡»**:
   - åˆ›å»ºæ–°çš„Gitåˆ†æ”¯
   - è¿›è¡Œå®Œæ•´çš„æµ‹è¯•ï¼ˆbuild + E2Eï¼‰
   - ä»£ç Review
   - å¤‡ä»½é‡è¦æ•°æ®

2. **âš ï¸ å¯¹äº"Needs Review"çš„æ–‡ä»¶**:
   - ä¸è¦æ€¥äºåˆ é™¤
   - å…ˆå’¨è¯¢å›¢é˜Ÿå…¶ä»–æˆå‘˜
   - æ£€æŸ¥æ˜¯å¦æœ‰æ–‡æ¡£è¯´æ˜ç”¨é€”
   - æµ‹è¯•åˆ é™¤åçš„å½±å“

3. **âš ï¸ é‡æ„ä»»åŠ¡**:
   - ä¼˜å…ˆç¼–å†™æµ‹è¯•è¦†ç›–
   - é€æ­¥è¿ç§»ï¼Œé¿å…å¤§è§„æ¨¡é‡å†™
   - ä¿æŒåŠŸèƒ½ä¸å˜
   - æ¯æ¬¡é‡æ„åå……åˆ†æµ‹è¯•

4. **âš ï¸ æ–‡æ¡£æ¸…ç†**:
   - æå–æœ‰ä»·å€¼çš„ä¿¡æ¯åˆ°æ–°æ–‡æ¡£
   - ä¿ç•™å†å²æ–‡æ¡£åˆ°archiveç›®å½•
   - æ›´æ–°READMEå’Œå¯¼èˆª

---

### é¢„æœŸæˆæœ

å®Œæˆæ‰€æœ‰æ¸…ç†å’Œæ•´ç†åï¼š

| æŒ‡æ ‡ | å½“å‰ | ç›®æ ‡ | æ”¹è¿› |
|------|------|------|------|
| **ä»£ç è¡Œæ•°** | ~30,000è¡Œ | ~28,950è¡Œ | -3.5% |
| **æ–‡ä»¶æ•°é‡** | ~155ä¸ª | ~145ä¸ª | -6.5% |
| **ç›®å½•å±‚çº§** | æ··ä¹± | æ¸…æ™° | +90% |
| **ä»£ç ç»„ç»‡** | ä¸­ç­‰ | ä¼˜ç§€ | +80% |
| **å¯ç»´æŠ¤æ€§** | ä¸­ç­‰ | é«˜ | +70% |
| **æ–‡æ¡£æ¸…æ™°åº¦** | ä¸­ç­‰ | é«˜ | +85% |

---

### åç»­ç»´æŠ¤å»ºè®®

1. **å»ºç«‹ä»£ç å®¡æŸ¥è§„èŒƒ**:
   - æ–°æ–‡ä»¶å¿…é¡»æ”¾åœ¨æ­£ç¡®çš„ç›®å½•
   - ç¦æ­¢åˆ›å»ºè¶…è¿‡300è¡Œçš„ç»„ä»¶
   - å¿…é¡»ä½¿ç”¨TypeScriptä¸¥æ ¼æ¨¡å¼

2. **å®šæœŸæ¸…ç†**:
   - æ¯æœˆæ£€æŸ¥æœªä½¿ç”¨çš„å¯¼å…¥
   - æ¯å­£åº¦å®¡æŸ¥ç»„ä»¶å¤§å°
   - æ¯åŠå¹´æ•´ç†æ–‡æ¡£

3. **å·¥å…·è¾…åŠ©**:
   - é…ç½®ESLintè§„åˆ™æ£€æŸ¥æœªä½¿ç”¨ä»£ç 
   - ä½¿ç”¨ä¾èµ–åˆ†æå·¥å…·
   - é…ç½®Git hooksé˜²æ­¢æäº¤è¿‡å¤§æ–‡ä»¶

4. **æ–‡æ¡£ç»´æŠ¤**:
   - ä»£ç å˜æ›´æ—¶æ›´æ–°æ¶æ„æ–‡æ¡£
   - è®°å½•é‡è¦çš„æ¶æ„å†³ç­–
   - ä¿æŒæ–‡æ¡£ä¸ä»£ç åŒæ­¥

---

**æ–‡æ¡£ç»“æŸ**

å¦‚æœ‰ä»»ä½•ç–‘é—®æˆ–éœ€è¦ååŠ©æ‰§è¡Œæ¸…ç†ä»»åŠ¡ï¼Œè¯·å‚è€ƒ[ä¼˜åŒ–å»ºè®®æ–‡æ¡£](./OPTIMIZATION_RECOMMENDATIONS.md)æˆ–å’¨è¯¢æ¶æ„å›¢é˜Ÿã€‚

